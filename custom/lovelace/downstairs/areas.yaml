# Backgrounds ******************************
- entity: sun.sun
  element: day
  state_action:
    - action: call-service
      service: floorplan.style_set
      service_data:
        entity: sensor.sunlight_opacity
        style: |
            > 
            if( entity.state == 0 )
                return "display: none;";
            return `opacity: ${entities['sensor.sunlight_opacity'].state};`

# Areas *************************************
- entity: binary_sensor.kitchen_occupancy
  elements:
    - path_kitchen
    - path_conservatory
    - light_overlay.kitchen_light
  state_action:
    - action: call-service
      service: floorplan.class_set
      service_data: 'motion motion-${entity.state}'    

- entity: binary_sensor.garage_back_doors
  elements:
    - path_utility
    - path_garage
    - light_overlay.garage_light
  state_action:
    - action: call-service
      service: floorplan.class_set
      service_data: 'motion motion-${entity.state}' 

- entity: binary_sensor.front_toilet_doors
  elements:
    - path_cloakroom
    - light_overlay.cloakroom_light
  state_action:
    - action: call-service
      service: floorplan.class_set
      service_data: 'motion motion-${entity.state}' 

- entity: binary_sensor.downstairs_3
  elements:
    - path_hall
    - light_overlay.hall_light
  state_action:
    - action: call-service
      service: floorplan.class_set
      service_data: 'motion motion-${entity.state}' 

- entity: binary_sensor.geniushub_dining_room_occupancy
  elements:
    - path_dining_room
    - light_overlay.dining_room_light
  state_action:
    - action: call-service
      service: floorplan.class_set
      service_data: 'motion motion-${entity.state}' 


# - entity: light.front_door
#   element: path_front_door
#   tap_action: 'toggle'
#   double_tap_action: false

- element: path_front_door
  entities: 
    - light.front_door_lights
    - binary_sensor.front_doorbell_motion
  state_action:
    - action: call-service
      service: floorplan.class_set
      service_data: |
          >
          let classes = [];
          classes.push('light-' + entities['light.front_door_lights'].state);
          classes.push('motion-' + entities['binary_sensor.front_doorbell_motion'].state);
          return classes.join(' ')

- element: path_living_room
  entities: 
    - light.living_room
    - binary_sensor.living_room_occupancy
  state_action:
    - action: call-service
      service: floorplan.class_set
      service_data: |
          >
          let classes = [];
          classes.push('light-' + entities['light.living_room'].state);
          classes.push('motion-' + entities['binary_sensor.living_room_occupancy'].state);
          return classes.join(' ')

        